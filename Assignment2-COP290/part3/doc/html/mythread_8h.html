<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Word Counter: include/mythread.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Word Counter
   </div>
   <div id="projectbrief">A simple word counter with pthreads</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mythread.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of threads using contexts.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;ucontext.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mythread.h:</div>
<div class="dyncontent">
<div class="center"><img src="mythread_8h__incl.png" border="0" usemap="#include_2mythread_8h" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="mythread_8h__dep__incl.png" border="0" usemap="#include_2mythread_8hdep" alt=""/></div>
<!-- MAP 1 -->
</div>
</div>
<p><a href="mythread_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlock.html">lock</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock struct which includes a pointer the context which has acquired this lock.  <a href="structlock.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a208f41a96703a668897f97f212bfaf52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mythread_8h.html#a208f41a96703a668897f97f212bfaf52">mythread_init</a> ()</td></tr>
<tr class="memdesc:a208f41a96703a668897f97f212bfaf52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize threads list.  <a href="mythread_8h.html#a208f41a96703a668897f97f212bfaf52">More...</a><br /></td></tr>
<tr class="separator:a208f41a96703a668897f97f212bfaf52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeeb66ec2603aa297891a339066005b9"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mythread_8h.html#afeeb66ec2603aa297891a339066005b9">mythread_create</a> (void func(void *), void *arg)</td></tr>
<tr class="memdesc:afeeb66ec2603aa297891a339066005b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new thread.  <a href="mythread_8h.html#afeeb66ec2603aa297891a339066005b9">More...</a><br /></td></tr>
<tr class="separator:afeeb66ec2603aa297891a339066005b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf1d6455a1b78b1be5113e76ba8b02dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mythread_8h.html#abf1d6455a1b78b1be5113e76ba8b02dc">mythread_join</a> ()</td></tr>
<tr class="memdesc:abf1d6455a1b78b1be5113e76ba8b02dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for other thread to complete. It is used in case of dependent threads.  <a href="mythread_8h.html#abf1d6455a1b78b1be5113e76ba8b02dc">More...</a><br /></td></tr>
<tr class="separator:abf1d6455a1b78b1be5113e76ba8b02dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c8049ca40472b6e4fedad5960d6b56d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mythread_8h.html#a8c8049ca40472b6e4fedad5960d6b56d">mythread_yield</a> ()</td></tr>
<tr class="memdesc:a8c8049ca40472b6e4fedad5960d6b56d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs context switching.  <a href="mythread_8h.html#a8c8049ca40472b6e4fedad5960d6b56d">More...</a><br /></td></tr>
<tr class="separator:a8c8049ca40472b6e4fedad5960d6b56d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a168a10005fede78825b8c0c925415add"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structlock.html">lock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mythread_8h.html#a168a10005fede78825b8c0c925415add">lock_new</a> ()</td></tr>
<tr class="memdesc:a168a10005fede78825b8c0c925415add"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a lock struct.  <a href="mythread_8h.html#a168a10005fede78825b8c0c925415add">More...</a><br /></td></tr>
<tr class="separator:a168a10005fede78825b8c0c925415add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add38fde7157ac3938c4a60b64ed67e9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mythread_8h.html#add38fde7157ac3938c4a60b64ed67e9f">lock_acquire</a> (struct <a class="el" href="structlock.html">lock</a> *lk)</td></tr>
<tr class="memdesc:add38fde7157ac3938c4a60b64ed67e9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to acquire the lock, yields if already acquired.  <a href="mythread_8h.html#add38fde7157ac3938c4a60b64ed67e9f">More...</a><br /></td></tr>
<tr class="separator:add38fde7157ac3938c4a60b64ed67e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86df4756182955a6ca389503c93d1822"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mythread_8h.html#a86df4756182955a6ca389503c93d1822">lock_release</a> (struct <a class="el" href="structlock.html">lock</a> *lk)</td></tr>
<tr class="memdesc:a86df4756182955a6ca389503c93d1822"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the lock.  <a href="mythread_8h.html#a86df4756182955a6ca389503c93d1822">More...</a><br /></td></tr>
<tr class="separator:a86df4756182955a6ca389503c93d1822"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of threads using contexts. </p>
<p>Contains functions related to running and managing threads to be ran concurrently using context from ucontext library. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="add38fde7157ac3938c4a60b64ed67e9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add38fde7157ac3938c4a60b64ed67e9f">&#9670;&nbsp;</a></span>lock_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lock_acquire </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlock.html">lock</a> *&#160;</td>
          <td class="paramname"><em>lk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to acquire the lock, yields if already acquired. </p>
<p>If the passed lock is not acquired by any other thread, acquires this lock by pointing lock context to current context. If it is aquired by another thread, then yields to other threads. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lk</td><td>Pointer to the lock that needs to be accessed </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mythread_8h_add38fde7157ac3938c4a60b64ed67e9f_icgraph.png" border="0" usemap="#mythread_8h_add38fde7157ac3938c4a60b64ed67e9f_icgraph" alt=""/></div>
<!-- MAP 2 -->
</div>

</div>
</div>
<a id="a168a10005fede78825b8c0c925415add"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a168a10005fede78825b8c0c925415add">&#9670;&nbsp;</a></span>lock_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structlock.html">lock</a> * lock_new </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a lock struct. </p>
<p>Creates and allocates memory for a new lock struct. Returns the newly created lock </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mythread_8h_a168a10005fede78825b8c0c925415add_icgraph.png" border="0" usemap="#mythread_8h_a168a10005fede78825b8c0c925415add_icgraph" alt=""/></div>
<!-- MAP 3 -->
</div>

</div>
</div>
<a id="a86df4756182955a6ca389503c93d1822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86df4756182955a6ca389503c93d1822">&#9670;&nbsp;</a></span>lock_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lock_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlock.html">lock</a> *&#160;</td>
          <td class="paramname"><em>lk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the lock. </p>
<p>Releases passed lock to be used by other threads. Sets context pointed by lock to NULL </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lk</td><td>Pointer to the lock that needs to be accessed </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mythread_8h_a86df4756182955a6ca389503c93d1822_icgraph.png" border="0" usemap="#mythread_8h_a86df4756182955a6ca389503c93d1822_icgraph" alt=""/></div>
<!-- MAP 4 -->
</div>

</div>
</div>
<a id="afeeb66ec2603aa297891a339066005b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeeb66ec2603aa297891a339066005b9">&#9670;&nbsp;</a></span>mythread_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ucontext_t * mythread_create </td>
          <td>(</td>
          <td class="paramtype">void &#160;</td>
          <td class="paramname"><em>func</em>void *, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new thread. </p>
<p>Creates a new thread by creating a new context and adding it to the threads list. Returns pointer to the newly created context </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>Pointer to the function/routine that needs to be ran in this thread </td></tr>
    <tr><td class="paramname">arg</td><td>Pointer to the arguments that needs to be passed to the function/routine </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mythread_8h_afeeb66ec2603aa297891a339066005b9_cgraph.png" border="0" usemap="#mythread_8h_afeeb66ec2603aa297891a339066005b9_cgraph" alt=""/></div>
<!-- MAP 5 -->
</div>

</div>
</div>
<a id="a208f41a96703a668897f97f212bfaf52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a208f41a96703a668897f97f212bfaf52">&#9670;&nbsp;</a></span>mythread_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mythread_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize threads list. </p>
<p>Creates and allocates memory for an empty list that is global to the mythread functions </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mythread_8h_a208f41a96703a668897f97f212bfaf52_cgraph.png" border="0" usemap="#mythread_8h_a208f41a96703a668897f97f212bfaf52_cgraph" alt=""/></div>
<!-- MAP 6 -->
</div>

</div>
</div>
<a id="abf1d6455a1b78b1be5113e76ba8b02dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf1d6455a1b78b1be5113e76ba8b02dc">&#9670;&nbsp;</a></span>mythread_join()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mythread_join </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for other thread to complete. It is used in case of dependent threads. </p>
<p>Starts running all the threads and ends only when all current threads are completed </p>

</div>
</div>
<a id="a8c8049ca40472b6e4fedad5960d6b56d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c8049ca40472b6e4fedad5960d6b56d">&#9670;&nbsp;</a></span>mythread_yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mythread_yield </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs context switching. </p>
<p>Switches thread from current thread to the next thread in threads list in a cyclic form, i.e., if the current thread is last in the list, switches to first thread in list, otherwise switches to next context </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
